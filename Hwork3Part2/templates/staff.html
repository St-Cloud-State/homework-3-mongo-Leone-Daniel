<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Loan Staff Portal</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/staff.css') }}">
</head>
<body>
    <h1>Loan Staff Portal</h1>

    <div id="mainContainer">
        <!-- Left Panel: View Applications -->
        <section id="viewApplicationsSection">
            <h2>View Applications</h2>
            <button onclick="loadApplications()">Refresh List</button>
            <div id="applicationsList"></div>
        </section>

        <!-- Right Panel: All actions -->
        <div id="actionSections">
            <section id="updateStatusSection">
                <h2>Update Application Status</h2>
                <label for="newStatus">New Status:</label>
                <select id="newStatus" onchange="toggleStatusSections()">
                    <option value="received">Received</option>
                    <option value="processing">Processing</option>
                    <option value="accepted">Accepted</option>
                    <option value="rejected">Rejected</option>
                </select><br>
                <button onclick="updateStatus()">Update Status</button>
                <div id="updateStatusResult"></div>
            </section>

            <section id="addProcessingNoteSection" style="display: none;">
                <h2>Add Processing Note</h2>
                <label for="processingSubphase">Select Subphase:</label>
                <select id="processingSubphase">
                    <option value="personal_details_check">Personal Details Check</option>
                    <option value="credit_check">Credit Check</option>
                    <option value="certification_check">Certification Check</option>
                </select><br>
                <textarea id="processingMessage" placeholder="Enter processing note"></textarea><br>
                <label for="processingCompleted">Task Completed?</label>
                <input type="checkbox" id="processingCompleted"><br>
                <button onclick="submitProcessingNote()">Submit Processing Note</button>
                <div id="processingNoteResult"></div>
            </section>

            <section id="addAcceptanceNoteSection" style="display: none;">
                <h2>Acceptance Note</h2>
                <textarea id="acceptanceMessage" placeholder="Enter acceptance note"></textarea><br>
            </section>

            <section id="addRejectionNoteSection" style="display: none;">
                <h2>Rejection Reason</h2>
                <input type="text" id="rejectionReason" placeholder="Enter reason for rejection"><br>
            </section>

            <section id="addGeneralNoteSection">
                <h2>Add General Note</h2>
                <textarea id="generalMessage" placeholder="Enter general note"></textarea><br>
                <button onclick="submitGeneralNote()">Submit General Note</button>
                <div id="generalNoteResult"></div>
            </section>

            <section id="deleteApplicationSection">
                <h2>Delete Application</h2>
                <button onclick="deleteApplication()">Delete Selected Application</button>
                <div id="deleteResult"></div>
            </section>
        </div>
    </div>

    <div class="bottomBar">
        <button onclick="goHome()">Return to Home</button>
    </div>

    <script src="{{ url_for('static', filename='js/nav.js') }}"></script>
    <script src="{{ url_for('static', filename='js/staff.js') }}"></script>
</body>
</html>
